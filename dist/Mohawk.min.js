/*! Mohawk - v0.6.0 - 2013-09-22 */
(function(a){var b,c,d,e=this,f=this.window,g=this.document,h=f.history,i=[],j={el:"body",listen:"touchstart touchmove touchend touchcancel keydown keyup keypress mousedown mouseup contextmenu click doubleclick mousemove focusin focusout mouseenter mouseleave submit input change dragstart drag dragenter dragleave dragover drop dragend"},k="enter setup serialize".split(" "),l=function(b,c){var d;"model"in c||(c.model=n),"object"==typeof c.events&&(c.events=u(c,c.events)),c.events=c.events||{},c.events.error=C.call(c,b,c.events.error||a);for(d in k)c[k[d]]=C.call(c,b,c[k[d]]);return c},m=function(a){return a.replace(/[._-][a-z]/g,function(a){return a.substr(1).toUpperCase()})},n=function(a){return a},o=Array.prototype.slice,p=function(a){var b,c=0;for(b in a)c+=parseInt(a.hasOwnProperty(b),10);return c},q=function(){var a;if(!(a=e.Zepto||e.jQuery||e.$))throw new Error("jQuery-compatible library is required!");return arguments.length?a.apply(a,arguments):a},r=function(a,b){var c=q();return!0===a?c.extend.apply(c,[!0,{}].concat(b)):c.extend.apply(c,[!0,{},a].concat(o.call(arguments,1)))},s=function(b,c,d){return function(){var e="function"==typeof d?d.apply(null,arguments):a;return delete b.handlers[c],e}},t=function(b,c){var d;return d=l(b,new b.classes[c](b)),d.exit=s(b,c,d.exit||a),d},u=function(a,b){var c;if("object"==typeof b)for(c in b)"function"==typeof b[c]&&(b[c]=u(a,b[c]));else if("function"==typeof b)return function(){return b.apply(a,arguments)};return b},v=function(b,c,d){return"boolean"==typeof c&&(d=c,c=a),"object"==typeof b&&(c=b,b=c.to||a,delete c.to),d=c&&c.update||d,d=null==d?!0:d,[b,c||{},d]},w=function(a,b){var c;for(c in b){if("function"!=typeof b[c])throw new Error("<"+b[c]+"> is not a module!");c=new b[c](a),"function"==typeof c.define&&c.define.call(a.context,c)}},x=function(a){return function(b){b.state&&b.state.to&&a.router.handleURL(b.state.to)}},y=function(a,b){var c=m(b);if(a.classes[c])return a.handlers[c]||(a.handlers[c]=t(a,c)),a.handlers[c];throw new Error("<"+c+"> undefined handler!")},z=function(a){var b;return b={router:new Router,history:[],classes:{},handlers:{},context:{globals:{},helpers:{}},factory:function(){return new arguments[0](b,r(!0,o.call(arguments,1)))},send:function(a){var c,d,e=0,f={};for(a="object"==typeof a&&a.length?a:[a],f=r(!0,o.call(arguments,1))||{},c=a.length;c>e;e+=1)d=a[e].call(b.context,f);return d},url:function(a,c){return D(b,function(){return b.router.recognizer.generate(a,c)})},go:function(a,c,d){var e=v(a,c,d);return c=e[1]||{},d=e[2],a=e[0],D(b,function(){if("/"===a.charAt(0)){if(!b.router.recognizer.recognize(a))throw new Error("<"+a+"> route not found!");return b.router.redirectURL(a,d)}return d?b.router.redirectURL(b.url(a,c),!0):p(c)?b.router.replaceWith(a,c):b.router.replaceWith(a)},RSVP.reject())},load:function(a){if("object"!=typeof a&&(a=a&&[a]),!a||0===a.length)throw new Error("That require some modules!");return w(b,a),b},run:function(c){var d;for(d in a)"_"!==d.charAt(0)&&d.charAt(0)===d.charAt(0).toUpperCase()?b.load(a[d]):b.classes[d]=a[d];return"function"==typeof c&&c.call(b.context,b),b}}},A=function(){var a,b,c,d={},e=z(d);for(a in i)i[a].call(e.context,d);for(f.addEventListener?f.addEventListener("popstate",x(e)):f.attachEvent?f.attachEvent("popstate",x(e)):f.onpopstate=x(e),b="string"==typeof j.listen?j.listen.split(" "):j.listen;c=b.pop();)B(e,c);return e.router.updateURL=function(a){h.pushState({to:a},g.title,a)},e.router.replaceURL=function(a){h.replaceState({to:a},g.title,a)},e.router.getHandler=function(a){return y(e,a)},e.router.redirectURL=function(a,b){return!1!==b?(e.router.updateURL(a),e.history.push({to:a})):e.router.replaceURL(a),e.router.handleURL(a)},e},B=function(a,b){d.on(b+".action",".js-action",function(c){var d,e,f,g,h,i,j;for(d in a.router.currentHandlerInfos)if(g=a.router.currentHandlerInfos[d].handler,"object"==typeof g.actions){j=q(c.currentTarget),e=j.data("action");for(i in g.actions)f=i.split(".")[0],e===f&&i.lastIndexOf("."+b)>0&&(h=C.call(g,a,g[g.actions[i]])(c,j))}return h})},C=function(a,b){var c=this;return function(){var d=arguments;return D(a,function(){return"function"==typeof b&&b.apply(c,d)})}},D=function(a,b,c){var d,e,f;try{d="function"==typeof b&&b()}catch(g){if(f=-1===String(g).indexOf("route not found")?"errorHandler":"notFound","function"==typeof a.classes[f]&&(e=new a.classes[f](a),"function"==typeof e.exception))return e.exception(g),c;throw g}return d};b=function(a){i.push(a)},b.loader=function(a){return c||(b.setup(a),d=q(j.el||"body",g),c=A()),c},b.setup=function(a){var b={};"function"==typeof a&&(a=a.call(b,b),a="object"==typeof a?a:b),"object"==typeof a&&(j=r(j,a))},this.mohawk=b}).call(this);